"use strict";angular.module("sbAdminApp").controller("AdminWenowCtrl",["$scope","$http","UserService","$rootScope","$state",function($scope,$http,UserService,$rootScope,$state){console.log("WeNow admin controller is here."),2!=$rootScope.globals.currentUser.privGroup&&(console.warn("User not authorized to view this page"),$state.go("dashboard.home")),$scope.$watch("fileContent",function(newValue,oldValue){console.log("fileContent has changed and it is now "+{}.toString.call($scope.fileContent).match(/\s([a-zA-Z]+)/)[1].toLowerCase())}),$scope.clearFileContent=function(){$scope.fileContent=null},$scope.submitFileContent=function(){console.info("AdminWenowCtrl: processing fileContent which has "+$scope.fileContent.lines.length+" rows");for(var i=0;i<$scope.fileContent.lines.length;i++){console.info("AdminWenowCtrl: requesting UserService to create user from row "+i);for(var userData={},el=0;el<$scope.fileContent.headers.length;el++)userData[$scope.fileContent.headers[el]]=$scope.fileContent.lines[i].data[el];UserService.Create(userData).then(function(i){return function(res){console.info(JSON.stringify(res)),$scope.fileContent.lines[i].status=1}}(i),function(i){return function(errorMessage){console.warn(errorMessage),$scope.fileContent.lines[i].status=-1}}(i))}}}]).directive("resize",function($window){return function(scope,element){var w=angular.element($window);scope.getWindowDimensions=function(){return{h:w.height(),w:w.width()}},scope.$watch(scope.getWindowDimensions,function(newValue,oldValue){scope.windowHeight=newValue.h,scope.windowWidth=newValue.w,scope.style=function(){return{height:newValue.h-100+"px",width:newValue.w-100+"px"}}},!0),w.bind("resize",function(){scope.$apply()})}});
"use strict";angular.module("sbAdminApp").controller("MainCtrl",["$scope","$http","CONFIG",function($scope,$http,CONFIG){$http({method:"GET",url:CONFIG.baseUrl+"/api/dashboard/getdata?module_id=7&task=date"}).then(function(response){$scope.firstTripData=response.data.data;var year=[$scope.firstTripData.result.slice(0,4)],month=[$scope.firstTripData.result.slice(5,7)],day=[$scope.firstTripData.result.slice(8,10)],months=["January","February","March","April","May","June","July","August","September","October","November","December"];0==$scope.firstTripData.result.slice(5,6)&&(month=[$scope.firstTripData.result.slice(6,7)]);var tripDateString=months[month-1]+" "+day+", "+year,tripDate=Date.parse(tripDateString);console.log(tripDate),$scope.fromDateString=new Date(tripDate),$scope.fromDateOptions.minDate=new Date(tripDate),$scope.toDateOptions.minDate=new Date(tripDate)},function(response){angular.isObject(response.data)&&response.data.text?$scope.firstTripDataError=response.data.text:$scope.firstTripDataError="An unknown error occurred."}),$scope.today=function(){$scope.fromDateString=new Date,$scope.toDateString=new Date},$scope.toDateString=new Date,$scope.clear=function(){$scope.fromDateString=null,$scope.toDateString=null},$scope.fromDateOptions={showWeeks:!0,formatYear:"yy",maxDate:new Date,minDate:new Date,today:new Date,startingDay:1},$scope.toDateOptions={showWeeks:!0,formatYear:"yy",maxDate:new Date,minDate:new Date,startingDay:1},$scope.open1=function(){$scope.popup1.opened=!0},$scope.open2=function(){$scope.popup2.opened=!0},$scope.popup1={opened:!1},$scope.popup2={opened:!1},$scope.fromDateChanged=function(){$scope.toDateOptions.minDate=$scope.fromDateString,$scope.fromDateString>$scope.toDateString&&($scope.toDateString=new Date)},$scope.toDateChanged=function(){$scope.fromDateOptions.maxDate=new Date}}]);
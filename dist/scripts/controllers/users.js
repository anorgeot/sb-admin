"use strict";angular.module("sbAdminApp").controller("UsersCtrl",["$scope","$http","CONFIG","i18nService",function($scope,$http,CONFIG,i18nService){$scope.columns=[{field:"first_name",displayName:"Prenom",minWidth:114},{field:"family_name",displayName:"Nom",minWidth:90},{field:"active",displayName:"Actif *",minWidth:137}],$scope.tableOptions={columnDefs:$scope.columns,onRegisterApi:function(gridApi){$scope.gridApi=gridApi,$scope.gridApi.grid.registerRowsProcessor($scope.singleFilter,200)},enableFiltering:!1,enableCellEditOnFocus:!1,enablePaginationControls:!0,enableSorting:!0,enableRowSelection:!0,enableRowHeaderSelection:!1,enableColumnResizing:!0},i18nService.setCurrentLang("fr"),$scope.filter=function(){console.info("Filter button has been clicked"),$scope.gridApi.grid.refresh()},$scope.searchFunct=function(keyEvent){13===keyEvent.which&&$scope.filter()},$scope.singleFilter=function(renderableRows){var matcher=new RegExp($scope.filterValue);return renderableRows.forEach(function(row){var match=!1;["first_name","family_name","active"].forEach(function(field){row.entity[field].match(matcher)&&(match=!0)}),match||(row.visible=!1)}),renderableRows},$http({method:"GET",url:CONFIG.baseUrl+"/api/dashboard/getdata",params:{module_id:8,task:"activity"}}).then(function(response){console.log(response.data.data[0].active),$scope.tableError=!1;var i;for(i=0;i<response.data.data.length;i++)1==response.data.data[i].active?response.data.data[i].active="OUI":response.data.data[i].active="NON";$scope.tableOptions.data=response.data.data},function(response){angular.isObject(response.data)&&response.data.text?$scope.tableError=response.data.text:$scope.tableError="An unknown error occurred."})}]);
angular.module("sbAdminApp").directive("fileReader",function(){return{scope:{fileReader:"="},link:function(scope,element){$(element).on("change",function(changeEvent){var files=changeEvent.target.files;if(files.length){var r=new FileReader;r.onload=function(e){var contents=e.target.result,allTextLines=contents.split(/\r\n|\n/),headers=null;headers=allTextLines.shift().split(";");for(var lines=[],i=0;i<allTextLines.length;i++){var data=allTextLines[i].split(";");data.length==headers.length&&lines.push({data:data,status:0})}scope.$apply(function(){scope.fileReader={lines:lines,headers:headers}})},r.readAsText(files[0])}})}}});